# 数据库作业11
## 2
并发操作可能会产生哪几类数据不一致？用什么方法能避免各种不一致的情况？

并发操作带来的数据不一致性包括三类：
**丢失修改**：两个事务 $T_1$ 和 $T_2$ 读入同一数据并修改，$T_2$提交的结果破坏了$T_1$提交的结果，导致 $T_1$ 的修改被丢失

**不可重复读**：不可重复读是指事务$T_1$读取数据后，事务$T_2$执行更新操作，使$T_1$无法再现前一次读取结果。不可重复读包括三种情况：
（1）事务$T_1$读取某一数据后，事务 $T_2$ 对其进行了修改，当事务$T_1$再次读该数据时， 得到与前一次不同的值。
（2）事务$T_1$按一定条件从数据库中读取了某些数据记录后，事务$T_2$删除了其中部分记录，当$T_1$再次按相同条件读取数据时，发现某些记录神秘地消失了 。 
（3）事务 $T_1$ 按一定条件从数据库中读取某些数据记录后， 事务$T_2$插入了一些记录， 当$T_1$再次按相同条件读取数据时，发现多了一些记录 。
**读“脏“数据**：读“脏“数据是指事务 $T_1$ 修改某一数据并将其写回磁盘， 事务$T_2$读取同一数据后， $T_1$由千某种原因被撤销，这时被$T_1$修改过的数据恢复原值，$T_2$读到的数据就与数据库中的数据不一致，则$T_2$读到的数据就为＂脏“数据，即不正确的数据 。

产生上述三类数据不一致性的主要原因是并发操作破坏了事务的隔离性。 并发控制机制就是要用正确的方式调度并发操作，使一个用户事务的执行不受其他事务的干扰，从而避免造成数据的不一致性。并发控制的主要技术有封锁、时间戳、乐观控制法和多版本并发控制等。

## 10
今有三个事务的一个调度 $r_3(B)r_1(A)w_3(B)r_2(B)r_2(A)w_2(B)r_1(B)w_1(A)$ , 该调度是冲突可串行化的调度吗？为什么？

该调度是冲突可串行化的调度。设调度$Sc1=r_3(B)r_1(A)w_3(B)r_2(B)r_2(A)w_2(B)r_1(B)w_1(A)$。
1. 交换$r_1(A)$和$w_3(B)$
2. 再交换$r_1(A)$和$r_2(B)r_2(A)w_2(B)$

最终得到$Sc1=r_3(B)w_3(B)r_2(B)r_2(A)w_2(B)r_1(A)r_1(B)w_1(A)$，该调度是串行的且两次交换均为不冲突操作，因此$Sc1$是冲突可串行化的调度。


