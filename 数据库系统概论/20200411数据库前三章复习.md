# 20200411数据库前三章复习
## 第一章 绪论
**数据**是数据库中存储的基本对象，描述事物的符号记录称为数据。数据的含义称为数据的语义，数据与其语义是不可分的。**数据库**是长期存储在计算机内、有组织的、可共享的大量数据的集合。数据库数据具有永久存储、有组织和可共享三个基本特点。**数据库管理系统**（DBMS）是计算机的基础软件，主要功能有数据的定义、组织、存储、管理、操纵以及数据库的事务管理、运行管理、建立和维护。数据库管理系统通常提供数据操纵语言（DML）来实现对数据库的基本操作。**数据库系统**（DBS）是由数据库、数据库管理系统、应用程序和数据库管理员（DBA）组成的存储、管理、处理和维护数据的系统。常常把数据库系统简称为数据库。数据独立性是借助数据库管理数据的一个显著优点，包括数据的物理独立性和逻辑独立性。**物理独立性**是指用户的应用程序与数据库中的数据的物理存储是相互独立的。**逻辑独立性**是指用户的应用程序与数据库的逻辑结构是相互独立的。**数据模型**是对现实世界数据特征的抽象，是数据库系统的核心和基础。第一类数据模型是**概念模型**，是按用户的观点来对数据和信息建模，主要用于数据库设计。第二类数据模型是**逻辑模型和物理模型**，逻辑模型主要用于数据库管理系统的实现，物理模型是对数据最底层的抽象。

信息世界中，客观存在并可相互区别的事物称为**实体**。例如，一个学生、一次选课都是实体。实体所具有的某一特性称为**属性**。例如，学生实体可以由学号、姓名、性别等属性组成。唯一标识实体的属性集称为**码**。例如，学号是学生实体的码。用实体名及其属性名集合来抽象和刻画同类实体，称为**实体型**。例如， 学生（学号，姓名，性别）就是一个实体型。同一类型实体的集合称为实体集。例如，全体学生就是一个实体集。实体之间的联系通常是指不同实体集之间的联系。

**数据模型**通常由数据结构、数据操作和数据的完整性约束条件三部分组成。**数据结构**描述数据库的组成对象以及对象之间的联系，**数据操作**是指对数据库中各种对象的实例允许执行的操作的集合，包括操作及有关的操作规则。**数据的完整性约束条件**是一组完整性规则。完整性规则是给定的数据模型中数据及其联系所具有的制约和依存规则，用以限定符合数据模型的数据库状态以及状态的变化，以保证数据的正确、有效和相容。

| 学号    | 姓名   | 性别 |
| ------- | ----- | ---- |
| 2013004 | 王小明 | 女   |
| 2013006 | 黄大鹏 | 男   |
| 2013008 | 张文斌 | 女   |

**关系模型**是最重要的一种数据模型。一个关系对应通常说的一张表，例如上面这张学生登记表。表中的一行即为一个元组，表中的一列即为一个属性，给每个属性起一个名称即属性名。例如上面的学生登记表有3列，对应3个属性。表中的某个属性组可以唯一确定一个元组，就成为本关系的码。如学号可以唯一确定一个学生，就称为此关系的码。域是一组具有相同数据类型的值的集合，属性的取值范围来自某个域。如性别的域是（男，女）。元组中的一个属性值称为分量，关系的每一个分量必须是一个不可分的数据项。对关系的描述称为关系模式，一般表示为`关系名（属性1，属性2，……，属性n）`。上面的关系可以描述为<code>学生（<u>学号</u>，姓名，性别）</code>。

在数据模型中有“型”（type）和“值”（value）的概念。型是指对某一类数据的结构和属性的说明，值是型的一个具体赋值。例如，学生记录定义为（学号，姓名，性别）记录型，而（2013004，王小明，女）是该记录型的一个记录值。模式（schema）是数据库中全体数据的逻辑结构和特征的描述，它仅仅涉及型的描述，不涉及具体的值。模式的一个具体值称为模式的一个实例。模式是相对稳定的，而实例是相对变动的。

数据库管理系统在体系结构上通常都具有相同的特征，即采用三级模式结构并提供两级映像功能。数据库系统的三级模式结构是指数据库系统是由外模式、模式和内模式三级构成，**模式**也称逻辑模式，是数据库中全体数据的逻辑结构和特征的描述，是所有用户的公共数据视图。**外模式**是数据库用户能够看见和使用的局部数据的逻辑结构和特征的描述，是数据库用户的数据视图，是与某一应用有关的数据的逻辑表示。**内模式**是数据物理结构和存储方式的描述，是数据在数据库内部的组织方式。三级模式是数据的三个抽象级别，为了能够在系统内部实现这三个抽象层次的联系和转换，数据库管理系统在这三级模式之间提供了两层映像：外模式／模式映像和模式／内模式映像。当模式改变时（例如增加新的关系、新的属性、改变属性的数据类型等），由数据库管理员对各个外模式／模式的映像作相应改变，可以使外模式保持不变。应用程序是依据数据的外模式编写的，从而应用程序不必修改，保证了数据与程序的逻辑独立性，简称**数据的逻辑独立性**。 当数据库的存储结构改变时（例如选用了另一种存储结构），由数据库管理员对模式／内模式映像作相应改变，可以使模式保持不变，从而应用程序也不必改变。保证了数据与程序的物理独立性，简称**数据的物理独立性**。 


```mermaid
graph BT;
    id1[数据库]-->id2[内模式];
    id2[内模式]--模式/内模式映像-->id3[模式];
    id3[模式]-->id4[外模式1];
    id3[模式]-->id5[外模式2];
    id3[模式]--外模式/模式映像-->id6[外模式3];
    id4[外模式1]-->id7[应用A];
    id4[外模式1]-->id8[应用B];
    id5[外模式2]-->id9[应用C];
    id5[外模式2]-->id10[应用D];
    id6[外模式3]-->id11[应用E];
    id6[外模式3]-->id12[应用F];
```


## 第二章 关系数据库
从集合论角度给出关系数据结构的形式化定义：
**域**是一组具有相同数据类型的值的集合。例如，自然数、整数都是域。**笛卡儿积**是域上的一种集合运算。 给定一组域 $D_1, D_2, ..., D_n$，它们的笛卡尔积为 $D_1 \times D_2 \times ... \times D_n = \{(d_1, d_2, ..., d_n) | d_i \in D_i, i=1, 2, ..., n\}$，其中每一元素叫做一个n元组，元素中的每一个值叫做一个分量。一个域允许的不同取值个数称为这个域的基数。例如，给出两个域，$D_1=\{计算机专业， 信息专业\}$，$D_2=\{男，女\}$，则$D_1$、$D_2$的笛卡尔积为 $D_1 \times D_2 = \{(计算机专业，男), (计算机专业，女), (信息专业，男), (信息专业，女)\}$，该笛卡尔积的基数为4。

$D_1 \times D_2 \times ... \times D_n$的子集叫做在域 $D_1, D_2, ..., D_n$上的关系，表示为 $R(D_1, D_2, ..., D_n)$，R表示关系的名字。若关系中的某一属性组的值能唯一地标识一个元组，而其子集不能，则称该属性组为**候选码**，若一个关系有多个候选码，则选定其中一个为**主码**。 候选码的诸属性称为主属性，不包含在任何候选码中的属性称为非主属性。

**关系的描述称为关系模式**，可以形式化地表示为`R(U, D, DOM, F)`，R为关系名，U为组成该关系的属性名集合，D为U中属性所来自的域，DOM为属性向域的映像集合，F为属性间数据的依赖关系集合。关系模式可以简记为`R(U)`或 $R(A_1, A_2, ..., A_n)$，其中R为关系名，$A_1, A_2, ..., A_n$为属性名。**关系是关系模式在某一时刻的状态或内容。**